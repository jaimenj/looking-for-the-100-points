'use strict';

var debug = true;
(function ($) {

    // DOM ready..
    $(function () {
        console.log('Loading main.js..');

        registerServiceWorker();
        updateCacheWithCurrentUrl();
        doTasksForMailchimpPopupFrom();

        // Multilevel dropdown menu normal..
        if (screen.availWidth >= 990) {
            $('body').on('mouseover', '.dropdown-item', function (e) {
                //e.preventDefault();
                if ($(this).closest('.menu-item').hasClass('menu-item-has-children')) {
                    $(this).siblings().find('.dropdown-menu').removeClass("show");
                    $(this).next('.dropdown-menu').addClass("show");
                } else {
                    $(this).parent().siblings().find('.dropdown-menu').removeClass("show");
                }
            });
        } else {
            /* NOT FINE BEHAVIOUR.. // Menu collapsed and expanding..
            $('body').on('click', '.dropdown-item', function (e) {
                if (e.originalEvent.detail > 1) {
                    // If comes from dblclick goes out..
                    return;
                }
                var currentMenuItem = this;
                e.preventDefault();
                setTimeout(function () {
                    $(currentMenuItem).parents('.menu-item').addClass('show');
                    $(currentMenuItem).parents('.dropdown-menu').addClass('show');
                }, 2, currentMenuItem);
                if ($(this).closest('.menu-item').hasClass('menu-item-has-children')) {
                    if ($(this).next('.dropdown-menu').hasClass('show')) {
                        $(this).next('.dropdown-menu').removeClass("show");
                    } else {
                        $(this).siblings().find('.dropdown-menu').removeClass("show");
                        $(this).next('.dropdown-menu').addClass("show");
                    }
                } else {
                    $(this).parent().siblings().find('.dropdown-menu').removeClass("show");
                }
            });
            // Do dlbclick to go to the page if it isn't a #..
            $('body').on('dblclick', '.dropdown-item', function (e) {
                if ($(this).prop('href') != '#') {
                    window.location.href = $(this).prop('href');
                }
            });*/
            $('.menu-item.menu-item-has-children').addClass('show');
            $('.menu-item.menu-item-has-children .dropdown-menu').addClass('show');
        }

        $('body').on('click', 'a[href="#"]', function (e) {
            e.preventDefault();
        });

        $('body').on('click', '.carousel-item-home', function () {
            window.location.href = $(this).data('url');
        });

    });

})(jQuery);

function registerServiceWorker() {
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/sw.js')
            .then(registration => {
                if (debug) console.log('Service worker updated successfully!');
                newSWRegistration = registration;
            })
            .catch(err => {
                if (debug) console.log('ERROR: Service worker NOT registered..', err)
            });

        //navigator.serviceWorker.getRegistrations().then(function(registrations) {
        //    for (let registration of registrations) {
        //        registration.unregister();
        //    }
        //    console.log('Service workers unregistered.');
        //});
    }
}

function doTasksForMailchimpPopupFrom() {
    if (localStorage.mailchimpFormClosed) {
        localStorage.mailchimpFormClosed = Number(localStorage.mailchimpFormClosed) + 1;
        if (localStorage.mailchimpFormClosed > 10) {
            localStorage.removeItem("mailchimpFormClosed");
        }
    }

    // Mailchimp form is shown or not.
    if (!localStorage.mailchimpFormSubmited && !localStorage.mailchimpFormClosed) {
        if (debug) console.log('NOT submited and not closed, popup form will be shown.');
        setTimeout(() => {
            if (document.getElementById('myMailchimpModal')) {
                document.getElementById('myMailchimpModal').classList.remove('my-modal-normal');
                document.getElementById('myMailchimpModal').classList.add('my-modal-centered');
                document.getElementById('boxclose').classList.add('boxclose');
            }
        }, 30000);
    } else {
        if (debug) console.log('Submitted or closed, setted for non popup form.');
    }

    // For closing Mailchimp form.
    if (document.getElementById("boxclose")) {
        document.getElementById("boxclose").addEventListener("click", () => {
            if (document.getElementById('myMailchimpModal')) {
                document.getElementById('myMailchimpModal').classList.add('my-modal-normal');
                document.getElementById('myMailchimpModal').classList.remove('my-modal-centered');
                document.getElementById('boxclose').classList.remove('boxclose');
            }
            localStorage.mailchimpFormClosed = 1;
        });
    }
}

function setMailchimpFormSubmited() {
    localStorage.mailchimpFormSubmited = 1;
}

function updateCacheWithCurrentUrl() {
    if (navigator.onLine) {
        if (debug) console.log('Updating Cache Storage: ' + document.location.href);
        caches.keys().then(key => {
            caches.open(key).then(theCache => {
                theCache.delete(document.location.href).then(() => {
                    if (debug) console.log('Item deleted into Cache Storage..');
                    theCache.add(document.location.href).then(() => {
                        if (debug) console.log('Item added into Cache Storage..');
                    }).catch(() => {
                        if (debug) console.log('ERROR adding current URL to the Cache Storage..');
                    });
                }).catch(() => {
                    if (debug) console.log('Item NOT delete..');
                });
            });
        });
    } else {
        if (debug) console.log('Cache Storage NOT updated: ' + document.location.href);
    }
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgZGVidWcgPSB0cnVlO1xuKGZ1bmN0aW9uICgkKSB7XG5cbiAgICAvLyBET00gcmVhZHkuLlxuICAgICQoZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zb2xlLmxvZygnTG9hZGluZyBtYWluLmpzLi4nKTtcblxuICAgICAgICByZWdpc3RlclNlcnZpY2VXb3JrZXIoKTtcbiAgICAgICAgdXBkYXRlQ2FjaGVXaXRoQ3VycmVudFVybCgpO1xuICAgICAgICBkb1Rhc2tzRm9yTWFpbGNoaW1wUG9wdXBGcm9tKCk7XG5cbiAgICAgICAgLy8gTXVsdGlsZXZlbCBkcm9wZG93biBtZW51IG5vcm1hbC4uXG4gICAgICAgIGlmIChzY3JlZW4uYXZhaWxXaWR0aCA+PSA5OTApIHtcbiAgICAgICAgICAgICQoJ2JvZHknKS5vbignbW91c2VvdmVyJywgJy5kcm9wZG93bi1pdGVtJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAvL2UucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5jbG9zZXN0KCcubWVudS1pdGVtJykuaGFzQ2xhc3MoJ21lbnUtaXRlbS1oYXMtY2hpbGRyZW4nKSkge1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCkuZmluZCgnLmRyb3Bkb3duLW1lbnUnKS5yZW1vdmVDbGFzcyhcInNob3dcIik7XG4gICAgICAgICAgICAgICAgICAgICQodGhpcykubmV4dCgnLmRyb3Bkb3duLW1lbnUnKS5hZGRDbGFzcyhcInNob3dcIik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5zaWJsaW5ncygpLmZpbmQoJy5kcm9wZG93bi1tZW51JykucmVtb3ZlQ2xhc3MoXCJzaG93XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLyogTk9UIEZJTkUgQkVIQVZJT1VSLi4gLy8gTWVudSBjb2xsYXBzZWQgYW5kIGV4cGFuZGluZy4uXG4gICAgICAgICAgICAkKCdib2R5Jykub24oJ2NsaWNrJywgJy5kcm9wZG93bi1pdGVtJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZS5vcmlnaW5hbEV2ZW50LmRldGFpbCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgY29tZXMgZnJvbSBkYmxjbGljayBnb2VzIG91dC4uXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRNZW51SXRlbSA9IHRoaXM7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkKGN1cnJlbnRNZW51SXRlbSkucGFyZW50cygnLm1lbnUtaXRlbScpLmFkZENsYXNzKCdzaG93Jyk7XG4gICAgICAgICAgICAgICAgICAgICQoY3VycmVudE1lbnVJdGVtKS5wYXJlbnRzKCcuZHJvcGRvd24tbWVudScpLmFkZENsYXNzKCdzaG93Jyk7XG4gICAgICAgICAgICAgICAgfSwgMiwgY3VycmVudE1lbnVJdGVtKTtcbiAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5jbG9zZXN0KCcubWVudS1pdGVtJykuaGFzQ2xhc3MoJ21lbnUtaXRlbS1oYXMtY2hpbGRyZW4nKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5uZXh0KCcuZHJvcGRvd24tbWVudScpLmhhc0NsYXNzKCdzaG93JykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykubmV4dCgnLmRyb3Bkb3duLW1lbnUnKS5yZW1vdmVDbGFzcyhcInNob3dcIik7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCkuZmluZCgnLmRyb3Bkb3duLW1lbnUnKS5yZW1vdmVDbGFzcyhcInNob3dcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLm5leHQoJy5kcm9wZG93bi1tZW51JykuYWRkQ2xhc3MoXCJzaG93XCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5zaWJsaW5ncygpLmZpbmQoJy5kcm9wZG93bi1tZW51JykucmVtb3ZlQ2xhc3MoXCJzaG93XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gRG8gZGxiY2xpY2sgdG8gZ28gdG8gdGhlIHBhZ2UgaWYgaXQgaXNuJ3QgYSAjLi5cbiAgICAgICAgICAgICQoJ2JvZHknKS5vbignZGJsY2xpY2snLCAnLmRyb3Bkb3duLWl0ZW0nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLnByb3AoJ2hyZWYnKSAhPSAnIycpIHtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAkKHRoaXMpLnByb3AoJ2hyZWYnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTsqL1xuICAgICAgICAgICAgJCgnLm1lbnUtaXRlbS5tZW51LWl0ZW0taGFzLWNoaWxkcmVuJykuYWRkQ2xhc3MoJ3Nob3cnKTtcbiAgICAgICAgICAgICQoJy5tZW51LWl0ZW0ubWVudS1pdGVtLWhhcy1jaGlsZHJlbiAuZHJvcGRvd24tbWVudScpLmFkZENsYXNzKCdzaG93Jyk7XG4gICAgICAgIH1cblxuICAgICAgICAkKCdib2R5Jykub24oJ2NsaWNrJywgJ2FbaHJlZj1cIiNcIl0nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9KTtcblxuICAgICAgICAkKCdib2R5Jykub24oJ2NsaWNrJywgJy5jYXJvdXNlbC1pdGVtLWhvbWUnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICQodGhpcykuZGF0YSgndXJsJyk7XG4gICAgICAgIH0pO1xuXG4gICAgfSk7XG5cbn0pKGpRdWVyeSk7XG5cbmZ1bmN0aW9uIHJlZ2lzdGVyU2VydmljZVdvcmtlcigpIHtcbiAgICBpZiAoJ3NlcnZpY2VXb3JrZXInIGluIG5hdmlnYXRvcikge1xuICAgICAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWdpc3RlcignL3N3LmpzJylcbiAgICAgICAgICAgIC50aGVuKHJlZ2lzdHJhdGlvbiA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGRlYnVnKSBjb25zb2xlLmxvZygnU2VydmljZSB3b3JrZXIgdXBkYXRlZCBzdWNjZXNzZnVsbHkhJyk7XG4gICAgICAgICAgICAgICAgbmV3U1dSZWdpc3RyYXRpb24gPSByZWdpc3RyYXRpb247XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGRlYnVnKSBjb25zb2xlLmxvZygnRVJST1I6IFNlcnZpY2Ugd29ya2VyIE5PVCByZWdpc3RlcmVkLi4nLCBlcnIpXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAvL25hdmlnYXRvci5zZXJ2aWNlV29ya2VyLmdldFJlZ2lzdHJhdGlvbnMoKS50aGVuKGZ1bmN0aW9uKHJlZ2lzdHJhdGlvbnMpIHtcbiAgICAgICAgLy8gICAgZm9yIChsZXQgcmVnaXN0cmF0aW9uIG9mIHJlZ2lzdHJhdGlvbnMpIHtcbiAgICAgICAgLy8gICAgICAgIHJlZ2lzdHJhdGlvbi51bnJlZ2lzdGVyKCk7XG4gICAgICAgIC8vICAgIH1cbiAgICAgICAgLy8gICAgY29uc29sZS5sb2coJ1NlcnZpY2Ugd29ya2VycyB1bnJlZ2lzdGVyZWQuJyk7XG4gICAgICAgIC8vfSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkb1Rhc2tzRm9yTWFpbGNoaW1wUG9wdXBGcm9tKCkge1xuICAgIGlmIChsb2NhbFN0b3JhZ2UubWFpbGNoaW1wRm9ybUNsb3NlZCkge1xuICAgICAgICBsb2NhbFN0b3JhZ2UubWFpbGNoaW1wRm9ybUNsb3NlZCA9IE51bWJlcihsb2NhbFN0b3JhZ2UubWFpbGNoaW1wRm9ybUNsb3NlZCkgKyAxO1xuICAgICAgICBpZiAobG9jYWxTdG9yYWdlLm1haWxjaGltcEZvcm1DbG9zZWQgPiAxMCkge1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oXCJtYWlsY2hpbXBGb3JtQ2xvc2VkXCIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gTWFpbGNoaW1wIGZvcm0gaXMgc2hvd24gb3Igbm90LlxuICAgIGlmICghbG9jYWxTdG9yYWdlLm1haWxjaGltcEZvcm1TdWJtaXRlZCAmJiAhbG9jYWxTdG9yYWdlLm1haWxjaGltcEZvcm1DbG9zZWQpIHtcbiAgICAgICAgaWYgKGRlYnVnKSBjb25zb2xlLmxvZygnTk9UIHN1Ym1pdGVkIGFuZCBub3QgY2xvc2VkLCBwb3B1cCBmb3JtIHdpbGwgYmUgc2hvd24uJyk7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdteU1haWxjaGltcE1vZGFsJykpIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbXlNYWlsY2hpbXBNb2RhbCcpLmNsYXNzTGlzdC5yZW1vdmUoJ215LW1vZGFsLW5vcm1hbCcpO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdteU1haWxjaGltcE1vZGFsJykuY2xhc3NMaXN0LmFkZCgnbXktbW9kYWwtY2VudGVyZWQnKTtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm94Y2xvc2UnKS5jbGFzc0xpc3QuYWRkKCdib3hjbG9zZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCAzMDAwMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGRlYnVnKSBjb25zb2xlLmxvZygnU3VibWl0dGVkIG9yIGNsb3NlZCwgc2V0dGVkIGZvciBub24gcG9wdXAgZm9ybS4nKTtcbiAgICB9XG5cbiAgICAvLyBGb3IgY2xvc2luZyBNYWlsY2hpbXAgZm9ybS5cbiAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJib3hjbG9zZVwiKSkge1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJveGNsb3NlXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ215TWFpbGNoaW1wTW9kYWwnKSkge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdteU1haWxjaGltcE1vZGFsJykuY2xhc3NMaXN0LmFkZCgnbXktbW9kYWwtbm9ybWFsJyk7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ215TWFpbGNoaW1wTW9kYWwnKS5jbGFzc0xpc3QucmVtb3ZlKCdteS1tb2RhbC1jZW50ZXJlZCcpO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdib3hjbG9zZScpLmNsYXNzTGlzdC5yZW1vdmUoJ2JveGNsb3NlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UubWFpbGNoaW1wRm9ybUNsb3NlZCA9IDE7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gc2V0TWFpbGNoaW1wRm9ybVN1Ym1pdGVkKCkge1xuICAgIGxvY2FsU3RvcmFnZS5tYWlsY2hpbXBGb3JtU3VibWl0ZWQgPSAxO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVDYWNoZVdpdGhDdXJyZW50VXJsKCkge1xuICAgIGlmIChuYXZpZ2F0b3Iub25MaW5lKSB7XG4gICAgICAgIGlmIChkZWJ1ZykgY29uc29sZS5sb2coJ1VwZGF0aW5nIENhY2hlIFN0b3JhZ2U6ICcgKyBkb2N1bWVudC5sb2NhdGlvbi5ocmVmKTtcbiAgICAgICAgY2FjaGVzLmtleXMoKS50aGVuKGtleSA9PiB7XG4gICAgICAgICAgICBjYWNoZXMub3BlbihrZXkpLnRoZW4odGhlQ2FjaGUgPT4ge1xuICAgICAgICAgICAgICAgIHRoZUNhY2hlLmRlbGV0ZShkb2N1bWVudC5sb2NhdGlvbi5ocmVmKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRlYnVnKSBjb25zb2xlLmxvZygnSXRlbSBkZWxldGVkIGludG8gQ2FjaGUgU3RvcmFnZS4uJyk7XG4gICAgICAgICAgICAgICAgICAgIHRoZUNhY2hlLmFkZChkb2N1bWVudC5sb2NhdGlvbi5ocmVmKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZWJ1ZykgY29uc29sZS5sb2coJ0l0ZW0gYWRkZWQgaW50byBDYWNoZSBTdG9yYWdlLi4nKTtcbiAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlYnVnKSBjb25zb2xlLmxvZygnRVJST1IgYWRkaW5nIGN1cnJlbnQgVVJMIHRvIHRoZSBDYWNoZSBTdG9yYWdlLi4nKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGVidWcpIGNvbnNvbGUubG9nKCdJdGVtIE5PVCBkZWxldGUuLicpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChkZWJ1ZykgY29uc29sZS5sb2coJ0NhY2hlIFN0b3JhZ2UgTk9UIHVwZGF0ZWQ6ICcgKyBkb2N1bWVudC5sb2NhdGlvbi5ocmVmKTtcbiAgICB9XG59Il19
